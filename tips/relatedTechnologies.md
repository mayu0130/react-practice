# Reactの周辺技術について

Reactはとても強力なライブラリですが、実際の現場では、さまざまなツールやフレームワークと組み合わせて使われています。

Reactの周辺技術として、GraphQL、データフェッチライブラリ、そしてNext.jsに触れます。

## データフェッチライブラリ

ReactではAPIからデータを取得して表示することが一般的です。
fetchやaxiosといった基本的なデータ取得手段に加え、より高度な機能を提供するライブラリもあります。これらのライブライは、キャッシュやエラーハンドリングを自動化し、効率的なデータ管理をサポートします。

#### キャッシュを使うメリット
**1.キャッシュの再利用:**すでに取得したデータを再利用することで、サーバーへのリクエスト回数を減らし、パフォーマンスの向上やAPIの負荷軽減が図れます。
**2.オフラインでの対応:**キャッシュがあれば、オフライン状態でも一度取得したデータを表示可能。
**3.データの整合性:**データが変わった場合のみ、新しいデータをフェッチをし、ユーザには最新かつ必要最小限のデータを提供します。

#### 代表的なデータフェッチライブラリ
- SWR
「Stale While Revalidate」戦略を採用し、キャッシュが古くなっていてもそのデータを一旦表示し、バックグラウンドで最新データをフェッチする。

**メリット**
ページの表示速度を保ちながら、データを更新できる。
簡単にセットアップができ、使い方が直感的。

- TanStack Query
より高度なデータフェッチやキャッシュ管理機能を提供。
特に複雑なアプリケーションでのエラーハンドリングやデータのリフェッチを強力にサポート

**メリット**
APIのキャッシュ機能が強力で、複雑なアプリケーションでもデータ管理を効率化できる。
手動リフレッシュやデータの事前フェッチも可能。

## GraphQL

GraphQLは、APIからデータを取得するためのクエリ言語です。REST APIと比較して柔軟で効率的なデータ取得ができ、現代のWeb開発では広く利用されています。

#### REST APIとの違い
- REST APIでは、データを取得するエンドポイントが固定されていて、特定のリソースの情報を取得するために複数のリクエストが必要なことがあります。
- GraphQLでは、クエリを使って1回のリクエストで必要なデータだけを取得することができるため、過剰なデータ取得や複数のリクエストを減らせます。

#### GraphQLのメリット
- 必要なデータだけを取得:クライアントが必要なフィールドだけをしていするため、不要なデータが含まれません。
- 一度のリクエストで複数のリソース習得:RESTでは複数のリクエストが必要なデータを1回で取得できる。
- 柔軟なクエリの作成:クエリにより、データ構造が柔軟に変更できる。

#### GraphQLライブラリの紹介
- Apollo Client
GraphQLクエリの送信、キャッシュ管理、データの管理をシンプルにするためのライブラリです。ApolloはReactとの相性が非常によく、GraphQLを利用したプロジェクトでよく使われます。

**特徴**
データのキャッシュ機能を持ち、同じデータに対する再リクエストを最小化。
クエリやミューテーションの結果をキャッシュし、ユーザー体験の向上に役立つ。

- urql
Apolloより軽量で、簡単にセットアップできるGraphQLクライアントライブラリです。よりシンプルな使い方を求めているプロジェクトに適しています。

## Next.js

Next.jsは、Reactのフレームワークで特にサーバサイドレンダリング(SSR)や静的サイト生成(SSG)など、SEOやパフォーマンスの最適化が求められる場面で利用されています。Reactの開発者向けに多くの機能を提供し、開発体験を大幅に向上させます。

#### CSR、SSR、SSGの違い

- CSR(Client-Side Rendering)
通常のReactアプリケーションのように、ブラウザ側でJavaScriptを実行し、ページを動的に生成します。ページが表示されるまでに全てのJavaScriptが読み込まれる必要があるため、初期ロード時間が長くなることがあります。

**特徴**
クライアント側でレンダリングが行われるため、最初の表示速度は遅いが、アプリ全体のインタラティブ性が高い。

- SSR(Server-Side Rendering)
サーバーでHTMLを生成してからクライアントに送信し、クライアントがHTMLを受け取った後にReactが動作を開始します。SEOに強く、最初のページ速度が速い。

**特徴**
サーバーでレンダリングされるため、初期表示が速い。
SEO対策が重要なプロジェクトでよく使われる。

- SSG(Static-Site Generation)
ビルド時に全てのページを静的に生成しておき、ユーザーには事前に生成されたHTMLを配信します。パフォーマンスに非常に優れ、、特にブログやマーケティングサイトで有効です。

**特徴**
サーバーの負荷が低く、パフォーマンスが非常に良い。
事前にページを生成するため、リアルタイム性があまり求められない場合に適している。

#### Next.jsの機能
- ページことのプリレンダリング
ページを静的に生成することで、高速なページ表示が可能。

- API Routes
Next.jsには簡単にAPIを作成できる仕組みがあり、バックエンドとしても利用可能。

- 画像最適化
自動で画像を最適化し、パフォーマンスを向上させる機能が組み込まれています。
